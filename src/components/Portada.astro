---
// Portada.astro
---

<section id="portada-bienvenida" class="fixed inset-0 w-full h-screen bg-[#f5f3f0] z-50 flex items-center justify-center overflow-hidden">
    
    <!-- Decoraci√≥n superior izquierda - Flores Arriba -->
    <div class="absolute top-0 left-0 w-80 md:w-64 lg:w-72 opacity-90 animate-fade-in-down">
        <img src="/imagenes/FloresArriba.webp" alt="Flores decorativas" class="w-full h-auto" />
    </div>

    <!-- Decoraci√≥n inferior derecha - Flores Abajo -->
    <div class="absolute bottom-0 right-0 w-80 md:w-64 lg:w-72 opacity-90 animate-fade-in-up">
        <img src="/imagenes/FloresAbajo.webp" alt="Flores decorativas" class="w-full h-auto" />
    </div>

    <!-- Contenido principal -->
    <div class="relative z-10 flex flex-col items-center justify-center px-6 py-8 w-full max-w-md">
        
        <!-- Marco con flores y nombres -->
        <div id="contenedor-principal" class="relative w-full flex justify-center items-center">
            
            <!-- Imagen del marco con flores (FloresCentro.webp) -->
            <div class="relative w-72 h-96 sm:w-80 sm:h-[28rem] md:w-96 md:h-[32rem]">
                <img
                    id="marco-flores"
                    src="/imagenes/FloresCentro.webp"
                    alt="Marco decorativo"
                    class="w-full h-full object-contain"
                />
                
                <!-- Nombres de los novios DENTRO del marco -->
                <div class="absolute inset-0 flex flex-col items-center justify-center px-8">
                    <h2 id="nombre-john" class="font-great-vibes text-5xl sm:text-6xl md:text-7xl text-[#8b8b8b] tracking-wide text-center">
                        John
                    </h2>
                    
                    <div id="ampersand" class="flex items-center gap-3 my-3">
                        <div class="w-12 h-px bg-[#8b8b8b]"></div>
                        <span class="text-[#8b8b8b] text-3xl sm:text-4xl font-charm italic">y</span>
                        <div class="w-12 h-px bg-[#8b8b8b]"></div>
                    </div>
                    
                    <h2 id="nombre-damarys" class="font-great-vibes text-5xl sm:text-6xl md:text-7xl text-[#8b8b8b] tracking-wide text-center">
                        Damarys
                    </h2>
                </div>
            </div>

        </div>

        <!-- Bot√≥n INGRESAR -->
        <div class="mt-8 flex justify-center">
            <button 
                id="btn-ingresar"
                class="group relative px-10 py-3 bg-[#8b9677] hover:bg-[#7a8566] text-white font-sans text-base md:text-lg uppercase tracking-widest rounded-lg shadow-xl transition-all duration-300 hover:scale-105 hover:shadow-2xl overflow-hidden"
            >
                <!-- Efecto brillante al hacer hover -->
                <span class="absolute inset-0 w-full h-full bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-700"></span>
                
                <span class="relative z-10 font-semibold">Ingresar</span>
            </button>
        </div>

    </div>

</section>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<!-- üé¨ ANIMACIONES CON GSAP                                     -->
<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<script>
    import { gsap } from "gsap";

    document.addEventListener('DOMContentLoaded', () => {
        console.log("üíê Iniciando animaciones de portada...");

        // ‚ïê‚ïê‚ïê MARCO CON FLORES - Scale desde el centro ‚ïê‚ïê‚ïê
        gsap.fromTo(
            "#marco-flores",
            { opacity: 0, scale: 0.3, rotation: -5 },
            {
                opacity: 1,
                scale: 1,
                rotation: 0,
                duration: 1.2,
                ease: "back.out(1.5)",
                delay: 0.3
            }
        );

        // ‚ïê‚ïê‚ïê ROTACI√ìN SUAVE DEL MARCO (loop infinito muy sutil) ‚ïê‚ïê‚ïê
        gsap.to("#marco-flores", {
            rotation: 2,
            duration: 4,
            ease: "sine.inOut",
            yoyo: true,
            repeat: -1,
            delay: 1.5
        });

        // ‚ïê‚ïê‚ïê NOMBRE JOHN - Letra por letra ‚ïê‚ïê‚ïê
        const textoJohn = "John";
        const contenedorJohn = document.getElementById("nombre-john");
        if (contenedorJohn) {
            contenedorJohn.innerHTML = textoJohn
                .split("")
                .map(
                    (letra) =>
                        `<span class="letra-animada" style="
                            opacity: 0; 
                            display: inline-block; 
                            transform: translateY(20px) scale(0.8);
                            filter: blur(3px);
                        ">${letra === " " ? "&nbsp;" : letra}</span>`
                )
                .join("");

            gsap.to("#nombre-john .letra-animada", {
                opacity: 1,
                y: 0,
                scale: 1,
                filter: "blur(0px)",
                duration: 0.5,
                ease: "power2.out",
                stagger: { each: 0.08, from: "start" },
                delay: 0.8
            });
        }

        // ‚ïê‚ïê‚ïê S√çMBOLO Y con l√≠neas - Scale con bounce ‚ïê‚ïê‚ïê
        gsap.fromTo(
            "#ampersand",
            { opacity: 0, scale: 0.5 },
            { opacity: 1, scale: 1, duration: 0.6, ease: "back.out(2)", delay: 1.3 }
        );

        // ‚ïê‚ïê‚ïê NOMBRE DAMARYS - Letra por letra ‚ïê‚ïê‚ïê
        const textoDamarys = "Damarys";
        const contenedorDamarys = document.getElementById("nombre-damarys");
        if (contenedorDamarys) {
            contenedorDamarys.innerHTML = textoDamarys
                .split("")
                .map(
                    (letra) =>
                        `<span class="letra-animada" style="
                            opacity: 0; 
                            display: inline-block; 
                            transform: translateY(20px) scale(0.8);
                            filter: blur(3px);
                        ">${letra === " " ? "&nbsp;" : letra}</span>`
                )
                .join("");

            gsap.to("#nombre-damarys .letra-animada", {
                opacity: 1,
                y: 0,
                scale: 1,
                filter: "blur(0px)",
                duration: 0.5,
                ease: "power2.out",
                stagger: { each: 0.08, from: "start" },
                delay: 1.6
            });
        }

        // ‚ïê‚ïê‚ïê BOT√ìN INGRESAR CON FUNCIONALIDAD ‚ïê‚ïê‚ïê
        const btnIngresar = document.getElementById('btn-ingresar');
        const portada = document.getElementById('portada-bienvenida');

        // Animaci√≥n de entrada del bot√≥n
        gsap.fromTo(
            "#btn-ingresar",
            { opacity: 0, y: 30, scale: 0.9 },
            { opacity: 1, y: 0, scale: 1, duration: 0.6, ease: "back.out(1.5)", delay: 2.2 }
        );

        btnIngresar?.addEventListener('click', () => {
            console.log("üö™ Cerrando portada...");
            
            // Animaci√≥n de salida suave
            gsap.to(portada, {
                opacity: 0,
                scale: 0.95,
                duration: 0.6,
                ease: "power2.inOut",
                onComplete: () => {
                    portada?.remove();
                    // Hacer scroll suave al inicio
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                    console.log("‚úÖ Portada cerrada");
                }
            });
        });

        console.log("‚ú® Animaciones de portada completadas!");
    });
</script>

<style>
    /* Fuentes personalizadas */
    @import url('https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap');

    .font-great-vibes {
        font-family: 'Great Vibes', cursive;
    }

    .font-charm {
        font-family: 'Great Vibes', 'Dancing Script', cursive;
    }

    /* Animaciones de entrada */
    @keyframes fade-in-down {
        from {
            opacity: 0;
            transform: translateY(-30px);
        }
        to {
            opacity: 0.9;
            transform: translateY(0);
        }
    }

    @keyframes fade-in-up {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 0.9;
            transform: translateY(0);
        }
    }

    .animate-fade-in-down {
        animation: fade-in-down 1s ease-out forwards;
    }

    .animate-fade-in-up {
        animation: fade-in-up 1s ease-out forwards;
        animation-delay: 0.2s;
    }

    /* Efecto hover en letras animadas */
    .letra-animada {
        transition: all 0.3s ease;
        will-change: transform, opacity, filter;
        position: relative;
    }

    .letra-animada:hover {
        transform: translateY(-3px) scale(1.1) !important;
        text-shadow: 0 0 15px rgba(139, 139, 139, 0.4) !important;
    }

    /* Prevenir scroll mientras est√° la portada */
    body:has(#portada-bienvenida) {
        overflow: hidden;
    }

    /* Optimizaci√≥n de rendimiento */
    #marco-flores,
    .letra-animada {
        backface-visibility: hidden;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }
</style>